# ğŸ“¦ íŒ¨í‚¤ì§€ ì„¤ì¹˜
!pip install -q flask flask-cors requests beautifulsoup4 pyngrok lxml nest-asyncio

print("ğŸ“¦ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì™„ë£Œ!")
print("ğŸš€ ì„œë²„ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...\n")

# ğŸš€ ì„œë²„ ì½”ë“œ ë° ì‹¤í–‰
from flask import Flask, jsonify, request, render_template_string
from flask_cors import CORS
import os
import requests
import json
import time
from datetime import datetime, timedelta
import re
from bs4 import BeautifulSoup
from pyngrok import ngrok
import urllib.parse
import threading
import nest_asyncio

# Colabì—ì„œ ë¹„ë™ê¸° ì‹¤í–‰ì„ ìœ„í•´ í•„ìš”
nest_asyncio.apply()

app = Flask(__name__)
# CORS ì„¤ì • ê°•í™”
CORS(app, resources={
    r"/api/*": {
        "origins": "*",
        "methods": ["GET", "POST", "OPTIONS"],
        "allow_headers": ["Content-Type", "Authorization"]
    }
})

# API í‚¤ ì„¤ì •
os.environ['NAVER_CLIENT_ID'] = 'fe9DLGhYbEVLy4sdQnVk'
os.environ['NAVER_CLIENT_SECRET'] = '2f0NEntTNN'
os.environ['NEWSAPI_KEY'] = 'a80b5826f01349c5824f4298d8f61eef'

# ngrok ì¸ì¦ í† í° ì„¤ì •
ngrok.set_auth_token("30KyKWx0zSS7ZJpm5TnJOKdI6fC_7y1Lta8QCMEyH6ZLjjrxj")

# ì¹´í…Œê³ ë¦¬ ë§¤í•‘
CATEGORIES = {
    'ì •ì¹˜': '100',
    'ê²½ì œ': '101',
    'ì‚¬íšŒ': '102',
    'ìƒí™œë¬¸í™”': '103',
    'ì—°ì˜ˆ': '106',
    'ìŠ¤í¬ì¸ ': '107',
    'ê±´ê°•': '108',
    'ì˜¤ëŠ˜ì˜ì¶”ì²œ': 'today'
}

# HTML í…ŒìŠ¤íŠ¸ í˜ì´ì§€ í…œí”Œë¦¿
TEST_PAGE_HTML = """
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‰´ìŠ¤ AI ì„œë²„ í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .controls {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .input-group label {
            font-weight: bold;
            min-width: 100px;
        }

        .input-group select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .btn {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #0056b3;
        }

        .btn-success { background: #28a745; }
        .btn-success:hover { background: #1e7e34; }

        .btn-warning { background: #ffc107; color: #212529; }
        .btn-warning:hover { background: #e0a800; }

        .results {
            padding: 20px;
        }

        .status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .status.loading {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .status.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .news-card {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            overflow: hidden;
            background: white;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .news-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .news-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .news-card .content {
            padding: 15px;
        }

        .news-card h3 {
            font-size: 16px;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .news-card p {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .news-card .meta {
            font-size: 12px;
            color: #999;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }

        .category-badge {
            display: inline-block;
            padding: 3px 8px;
            background: #007bff;
            color: white;
            border-radius: 12px;
            font-size: 11px;
            margin-right: 5px;
        }

        .json-viewer {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .quick-tests {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .placeholder-img {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
                        linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
                        linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 14px;
        }

        .server-info {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—ï¸ ë‰´ìŠ¤ AI ì„œë²„ í…ŒìŠ¤íŠ¸</h1>
            <p>ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ìˆìŠµë‹ˆë‹¤!</p>
        </div>

        <div class="controls">
            <div class="server-info">
                <h3>ğŸ“¡ ì„œë²„ ì •ë³´</h3>
                <p><strong>í˜„ì¬ URL:</strong> {{ current_url }}</p>
                <p><strong>ìƒíƒœ:</strong> <span style="color: green;">âœ… ì‹¤í–‰ì¤‘</span></p>
                <p><strong>ì§€ì› ì¹´í…Œê³ ë¦¬:</strong> {{ categories|join(', ') }}</p>
            </div>

            <div class="input-group">
                <label for="category">ì¹´í…Œê³ ë¦¬:</label>
                <select id="category">
                    <option value="">ì „ì²´ ë‰´ìŠ¤</option>
                    <option value="ì •ì¹˜">ì •ì¹˜</option>
                    <option value="ê²½ì œ">ê²½ì œ</option>
                    <option value="ì‚¬íšŒ">ì‚¬íšŒ</option>
                    <option value="ìƒí™œë¬¸í™”">ìƒí™œë¬¸í™”</option>
                    <option value="ì—°ì˜ˆ">ì—°ì˜ˆ</option>
                    <option value="ìŠ¤í¬ì¸ ">ìŠ¤í¬ì¸ </option>
                    <option value="ê±´ê°•">ê±´ê°•</option>
                    <option value="ì˜¤ëŠ˜ì˜ì¶”ì²œ">ì˜¤ëŠ˜ì˜ì¶”ì²œ</option>
                </select>
                <button class="btn" onclick="fetchNews()">ë‰´ìŠ¤ ê°€ì ¸ì˜¤ê¸°</button>
                <button class="btn btn-warning" onclick="showJson()">JSON ë³´ê¸°</button>
            </div>

            <div class="quick-tests">
                <button class="btn btn-success" onclick="quickTest('categories')">ì¹´í…Œê³ ë¦¬ ëª©ë¡</button>
                <button class="btn" onclick="quickTest('ì •ì¹˜')">ì •ì¹˜ ë‰´ìŠ¤</button>
                <button class="btn" onclick="quickTest('ê²½ì œ')">ê²½ì œ ë‰´ìŠ¤</button>
                <button class="btn" onclick="quickTest('ì—°ì˜ˆ')">ì—°ì˜ˆ ë‰´ìŠ¤</button>
            </div>
        </div>

        <div class="results">
            <div id="status"></div>
            <div id="newsContainer"></div>
        </div>
    </div>

    <script>
        let currentData = null;
        const serverUrl = window.location.origin; // í˜„ì¬ ì„œë²„ URL ì‚¬ìš©

        function showStatus(message, type = 'loading') {
            const status = document.getElementById('status');
            status.className = `status ${type}`;
            status.innerHTML = message;
        }

        async function fetchNews() {
            const category = document.getElementById('category').value;
            const endpoint = category ? `/api/news/${category}` : '/api/news';

            showStatus('ë‰´ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...', 'loading');

            try {
                const response = await fetch(`${serverUrl}${endpoint}`);
                currentData = await response.json();

                if (response.ok) {
                    displayNews(currentData);
                    showStatus(`âœ… ë‰´ìŠ¤ ë¡œë“œ ì™„ë£Œ!`, 'success');
                } else {
                    showStatus(`âŒ ì˜¤ë¥˜: ${currentData.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`, 'error');
                }
            } catch (error) {
                showStatus(`âŒ ìš”ì²­ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function displayNews(data) {
            const container = document.getElementById('newsContainer');

            if (data.category) {
                // ë‹¨ì¼ ì¹´í…Œê³ ë¦¬
                const newsHtml = data.news.map(news => createNewsCard(news)).join('');
                container.innerHTML = `
                    <h2>ğŸ“° ${data.category} (${data.total}ê°œ)</h2>
                    <div class="news-grid">${newsHtml}</div>
                `;
            } else {
                // ì „ì²´ ì¹´í…Œê³ ë¦¬
                let html = '<h2>ğŸ“° ì „ì²´ ë‰´ìŠ¤</h2>';
                for (const [category, newsList] of Object.entries(data)) {
                    const newsHtml = newsList.map(news => createNewsCard(news)).join('');
                    html += `
                        <h3 style="margin-top: 30px; margin-bottom: 15px;">ğŸ·ï¸ ${category} (${newsList.length}ê°œ)</h3>
                        <div class="news-grid">${newsHtml}</div>
                    `;
                }
                container.innerHTML = html;
            }
        }

        function createNewsCard(news) {
            const imageHtml = news.image_url
                ? `<img src="${news.image_url}" alt="ë‰´ìŠ¤ ì´ë¯¸ì§€" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                   <div class="placeholder-img" style="display: none;">ì´ë¯¸ì§€ ì—†ìŒ</div>`
                : `<div class="placeholder-img">ì´ë¯¸ì§€ ì—†ìŒ</div>`;

            return `
                <div class="news-card">
                    ${imageHtml}
                    <div class="content">
                        <h3>${news.title}</h3>
                        <p><strong>ë¯¸ë¦¬ë³´ê¸°:</strong> ${news.preview_summary}</p>
                        ${news.detailed_summary ? `<p><strong>ìƒì„¸:</strong> ${news.detailed_summary}</p>` : ''}
                        <div class="meta">
                            <span class="category-badge">${news.category}</span>
                            <span>${new Date(news.pub_date).toLocaleString('ko-KR')}</span>
                            <br>
                            <a href="${news.link}" target="_blank" style="color: #007bff;">ì›ë¬¸ ë³´ê¸°</a>
                        </div>
                    </div>
                </div>
            `;
        }

        async function quickTest(test) {
            if (test === 'categories') {
                showStatus('ì¹´í…Œê³ ë¦¬ ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ì¤‘...', 'loading');
                try {
                    const response = await fetch(`${serverUrl}/api/categories`);
                    const categories = await response.json();
                    showStatus(`âœ… ì§€ì› ì¹´í…Œê³ ë¦¬: ${categories.join(', ')}`, 'success');
                } catch (error) {
                    showStatus(`âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
                }
            } else {
                document.getElementById('category').value = test;
                await fetchNews();
            }
        }

        function showJson() {
            if (!currentData) {
                showStatus('ë¨¼ì € ë‰´ìŠ¤ë¥¼ ê°€ì ¸ì™€ì£¼ì„¸ìš”.', 'error');
                return;
            }

            const container = document.getElementById('newsContainer');
            container.innerHTML = `
                <h2>ğŸ“„ JSON ë°ì´í„°</h2>
                <div class="json-viewer">${JSON.stringify(currentData, null, 2)}</div>
            `;
            showStatus('JSON ë°ì´í„°ë¥¼ í‘œì‹œí–ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ ì •ì¹˜ ë‰´ìŠ¤ ë¡œë“œ
        window.onload = function() {
            showStatus('ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì¤‘ì…ë‹ˆë‹¤.', 'success');
        };
    </script>
</body>
</html>
"""

class NewsService:
    def __init__(self):
        self.naver_client_id = os.environ.get('NAVER_CLIENT_ID')
        self.naver_client_secret = os.environ.get('NAVER_CLIENT_SECRET')
        self.newsapi_key = os.environ.get('NEWSAPI_KEY')

    def get_naver_news(self, category, count=5):
        """ë„¤ì´ë²„ ë‰´ìŠ¤ APIë¡œ ìµœì‹  ë‰´ìŠ¤ ê°€ì ¸ì˜¤ê¸°"""
        url = "https://openapi.naver.com/v1/search/news.json"

        query_map = {
            'ì •ì¹˜': 'ì •ì¹˜',
            'ê²½ì œ': 'ê²½ì œ',
            'ì‚¬íšŒ': 'ì‚¬íšŒ',
            'ìƒí™œë¬¸í™”': 'ìƒí™œ ë¬¸í™”',
            'ì—°ì˜ˆ': 'ì—°ì˜ˆ',
            'ìŠ¤í¬ì¸ ': 'ìŠ¤í¬ì¸ ',
            'ê±´ê°•': 'ê±´ê°•',
            'ì˜¤ëŠ˜ì˜ì¶”ì²œ': 'ë‰´ìŠ¤'
        }

        headers = {
            'X-Naver-Client-Id': self.naver_client_id,
            'X-Naver-Client-Secret': self.naver_client_secret
        }

        params = {
            'query': query_map.get(category, 'ë‰´ìŠ¤'),
            'display': count,
            'start': 1,
            'sort': 'date'
        }

        try:
            response = requests.get(url, headers=headers, params=params)
            response.raise_for_status()
            return response.json()
        except requests.exceptions.RequestException as e:
            print(f"ë„¤ì´ë²„ ë‰´ìŠ¤ API ì˜¤ë¥˜: {e}")
            return None

    def extract_image_from_content(self, link):
        """ë‰´ìŠ¤ ë§í¬ì—ì„œ ëŒ€í‘œ ì´ë¯¸ì§€ ì¶”ì¶œ"""
        try:
            headers = {
                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
            }
            response = requests.get(link, headers=headers, timeout=5)
            soup = BeautifulSoup(response.content, 'html.parser')

            img_selectors = [
                'meta[property="og:image"]',
                'meta[name="twitter:image"]',
                '.end_photo_org img',
                '.article_photo img',
                'article img',
                '.news_img img'
            ]

            for selector in img_selectors:
                img_tag = soup.select_one(selector)
                if img_tag:
                    if selector.startswith('meta'):
                        img_url = img_tag.get('content')
                    else:
                        img_url = img_tag.get('src')

                    if img_url and img_url.startswith('http'):
                        return img_url

            return None
        except Exception as e:
            return None

    def summarize_news(self, title, description, detail_type="preview"):
        """AIë¥¼ ì‚¬ìš©í•œ ë‰´ìŠ¤ ìš”ì•½"""
        try:
            content = f"{title} {description}"

            if detail_type == "preview":
                if len(content) > 50:
                    return content[:47] + "..."
                return content
            else:
                if len(content) > 150:
                    return content[:147] + "..."
                return content

        except Exception as e:
            return title[:50] + "..." if len(title) > 50 else title

news_service = NewsService()

# CORS í—¤ë”ë¥¼ ëª¨ë“  ì‘ë‹µì— ì¶”ê°€
@app.after_request
def after_request(response):
    response.headers.add('Access-Control-Allow-Origin', '*')
    response.headers.add('Access-Control-Allow-Headers', 'Content-Type,Authorization')
    response.headers.add('Access-Control-Allow-Methods', 'GET,POST,OPTIONS')
    return response

# ë¼ìš°íŠ¸ ì •ì˜
@app.route('/')
def home():
    return jsonify({
        "message": "ğŸ—ï¸ ë‰´ìŠ¤ ì¶”ì²œ AI ì„œë²„ê°€ ì‹¤í–‰ì¤‘ì…ë‹ˆë‹¤!",
        "endpoints": {
            "/api/news/<category>": "ì¹´í…Œê³ ë¦¬ë³„ ë‰´ìŠ¤ ì¡°íšŒ",
            "/api/news": "ì „ì²´ ì¹´í…Œê³ ë¦¬ ë‰´ìŠ¤ ì¡°íšŒ",
            "/api/categories": "ì§€ì› ì¹´í…Œê³ ë¦¬ ëª©ë¡",
            "/test": "ì›¹ í…ŒìŠ¤íŠ¸ í˜ì´ì§€"
        },
        "categories": list(CATEGORIES.keys()),
        "status": "running"
    })

# ì›¹ í…ŒìŠ¤íŠ¸ í˜ì´ì§€
@app.route('/test')
def test_page():
    return render_template_string(TEST_PAGE_HTML,
                                current_url=request.host_url,
                                categories=list(CATEGORIES.keys()))

@app.route('/api/news/<category>')
def get_news_by_category(category):
    """ì¹´í…Œê³ ë¦¬ë³„ ë‰´ìŠ¤ ì¡°íšŒ"""
    if category not in CATEGORIES:
        return jsonify({"error": "ì§€ì›í•˜ì§€ ì•ŠëŠ” ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤."}), 400

    news_data = news_service.get_naver_news(category)

    if not news_data or 'items' not in news_data:
        return jsonify({"error": "ë‰´ìŠ¤ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."}), 500

    processed_news = []
    for item in news_data['items'][:5]:
        title = re.sub(r'<[^>]+>', '', item['title'])
        description = re.sub(r'<[^>]+>', '', item['description'])

        image_url = None
        if len(processed_news) < 3:
            image_url = news_service.extract_image_from_content(item['link'])

        news_item = {
            "title": title,
            "description": description,
            "link": item['link'],
            "pub_date": item['pubDate'],
            "image_url": image_url,
            "preview_summary": news_service.summarize_news(title, description, "preview"),
            "detailed_summary": news_service.summarize_news(title, description, "detailed"),
            "category": category
        }
        processed_news.append(news_item)

    return jsonify({
        "category": category,
        "news": processed_news,
        "total": len(processed_news)
    })

@app.route('/api/news')
def get_all_categories():
    """ëª¨ë“  ì¹´í…Œê³ ë¦¬ì˜ ë‰´ìŠ¤ ì¡°íšŒ"""
    all_news = {}

    for category in CATEGORIES.keys():
        news_data = news_service.get_naver_news(category, 3)

        if news_data and 'items' in news_data:
            processed_news = []
            for item in news_data['items'][:3]:
                title = re.sub(r'<[^>]+>', '', item['title'])
                description = re.sub(r'<[^>]+>', '', item['description'])

                news_item = {
                    "title": title,
                    "description": description,
                    "link": item['link'],
                    "pub_date": item['pubDate'],
                    "preview_summary": news_service.summarize_news(title, description, "preview"),
                    "category": category
                }
                processed_news.append(news_item)

            all_news[category] = processed_news

    return jsonify(all_news)

@app.route('/api/categories')
def get_categories():
    """ì§€ì›í•˜ëŠ” ì¹´í…Œê³ ë¦¬ ëª©ë¡"""
    return jsonify(list(CATEGORIES.keys()))

# OPTIONS ìš”ì²­ ì²˜ë¦¬ (CORS preflight)
@app.route('/api/<path:path>', methods=['OPTIONS'])
def options_handler(path):
    return '', 200

# ğŸŒ ì„œë²„ ì‹¤í–‰ ë° ngrok í„°ë„ ì„¤ì •
try:
    # ê¸°ì¡´ í„°ë„ ì¢…ë£Œ
    ngrok.kill()

    # ìƒˆ í„°ë„ ìƒì„±
    port = 8000
    public_url = ngrok.connect(port)

    print(f"ğŸš€ ì„œë²„ê°€ ì‹œì‘ë©ë‹ˆë‹¤!")
    print(f"ğŸ“± ëª¨ë°”ì¼ ì•±ì—ì„œ ì‚¬ìš©í•  URL: {public_url}")
    print(f"ğŸ”— ì›¹ í…ŒìŠ¤íŠ¸ í˜ì´ì§€: {public_url}/test")
    print(f"ğŸ“‹ API ì—”ë“œí¬ì¸íŠ¸:")
    print(f"   - ì „ì²´ ë‰´ìŠ¤: {public_url}/api/news")
    print(f"   - ì •ì¹˜ ë‰´ìŠ¤: {public_url}/api/news/ì •ì¹˜")
    print(f"   - ì¹´í…Œê³ ë¦¬ ëª©ë¡: {public_url}/api/categories")
    print("\n" + "="*60)

    # Flask ì„œë²„ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰
    def run_server():
        app.run(host='0.0.0.0', port=port, debug=False, use_reloader=False)

    # ì„œë²„ë¥¼ ë³„ë„ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
    server_thread = threading.Thread(target=run_server)
    server_thread.daemon = True
    server_thread.start()

    print("âœ… ì„œë²„ê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰ì¤‘ì…ë‹ˆë‹¤!")
    print(f"ğŸŒ ì›¹ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì—ì„œ ë°”ë¡œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”: {public_url}/test")

    # ì„œë²„ ì‹œì‘ ëŒ€ê¸°
    time.sleep(3)

    print("\nğŸ‰ ì„œë²„ ì¤€ë¹„ ì™„ë£Œ!")
    print(f"ğŸ“± ëª¨ë°”ì¼ ì•± ì—°ë™ URL: {public_url}")
    print(f"ğŸ”— ì›¹ í…ŒìŠ¤íŠ¸: {public_url}/test")

except Exception as e:
    print(f"âŒ ì„œë²„ ì‹œì‘ ì˜¤ë¥˜: {e}")
    print("ğŸ’¡ ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ì„¸ìš”.")
